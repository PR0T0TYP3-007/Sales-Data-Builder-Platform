<% layout('layout') %>
<div class="header">
    <div class="page-title">Audit Logs</div>
</div>
<div class="card">
    <div class="card-header">Recent Actions</div>
    <div class="card-body">
        <table class="table audit-logs-table">
            <thead>
                <tr>
                    <th>ID</th>
                    <th>Actor</th>
                    <th>Action</th>
                    <th>Entity Type</th>
                    <th>Details</th>
                    <th>Timestamp</th>
                </tr>
            </thead>
            <tbody>
                <% logs.forEach(function(log) { %>
                    <tr style="height: 2.2em;">
                        <td><%= log.id %></td>
                        <td><%= log.actor_email || log.actor_id %></td>
                        <td><%= log.action %></td>
                        <td><%= log.entity_type %></td>
                        <td><%= log.details ? JSON.stringify(log.details) : '' %></td>
                        <td><%= log.created_at || log.timestamp %></td>
                    </tr>
                <% }) %>
            </tbody>
        </table>
        <div class="pagination" style="margin-top:1em; text-align:center;">
            <% if (page > 1) { %>
                <a href="?page=<%= page - 1 %>" class="btn btn-secondary">Previous</a>
            <% } %>
            <span style="margin:0 1em;">Page <%= page %> of <%= totalPages %></span>
            <% if (page < totalPages) { %>
                <a href="?page=<%= page + 1 %>" class="btn btn-secondary">Next</a>
            <% } %>
        </div>
    </div>
</div>
